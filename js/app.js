function Location(a){if(a){for(var b in a)this[b]=a[b];this.marker=makeMapMarker(this)}else this.name="",this.address="",this.lat=0,this.lon=0,this.phone="",this.category="",this.marker=null}var mapViewModel;Location.prototype={displayInfoWindow:function(a){openInfoView(a)}};var ViewModel=function(){var a=this;this.menuVisibility=ko.observable(!0),this.filterText=ko.observable(""),this.locations=ko.observableArray(),this.filteredLocations=ko.observableArray(),this.setFilteredLocations=function(){var b=a.filterText().toLowerCase();a.filteredLocations(a.locations().filter(function(a){var c=a.category.toLowerCase(),d=a.name.toLowerCase(),e=c.indexOf(b)>-1||d.indexOf(b)>-1;return e?a.marker.setMap(map):a.marker.setMap(null),e}))},this.toggleMenuVisibility=function(){this.menuVisibility(!this.menuVisibility()),map.setCenter(mapBounds.getCenter())},this.filterText.subscribe(a.setFilteredLocations),this.locations.subscribe(a.setFilteredLocations)};window.addEventListener("load",function(){mapViewModel=new ViewModel,ko.applyBindings(mapViewModel),initializeMap();var a="Manhattan, NY, US";getPlacesAndDetail(a)});